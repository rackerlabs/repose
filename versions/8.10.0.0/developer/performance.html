<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]>
<meta content="IE=edge" http-equiv="X-UA-Compatible">
<![endif]-->
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<meta content="Asciidoctor 1.5.6.1" name="generator">
<title>Performance Testing</title>
<style>/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template { display: none; }

script { display: none !important; }

/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a { background: transparent; }

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

meta.foundation-mq-small { font-family: "only screen and (min-width: 768px)"; width: 768px; }

meta.foundation-mq-medium { font-family: "only screen and (min-width:1280px)"; width: 1280px; }

meta.foundation-mq-large { font-family: "only screen and (min-width:1440px)"; width: 1440px; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: white; color: rgba(0, 0, 0, 0.8); padding: 0; margin: 0; font-family: "Noto Serif", "DejaVu Serif", serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

object, svg { display: inline-block; vertical-align: middle; }

.center { margin-left: auto; margin-right: auto; }

.spread { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { line-height: 1.45; color: #7a2518; font-weight: normal; margin-top: 0; margin-bottom: 0.25em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #2156a5; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #1d4b8f; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: "Open Sans", "DejaVu Sans", sans-serif; font-weight: 300; font-style: normal; color: #ba3925; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.0125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #e99b8f; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #ddddd8; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace; font-weight: normal; color: rgba(0, 0, 0, 0.9); }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }

ul, ol { margin-left: 1.5em; }
ul.no-bullet, ol.no-bullet { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: rgba(0, 0, 0, 0.8); border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: 0.9375em; color: rgba(0, 0, 0, 0.6); }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: rgba(0, 0, 0, 0.6); }

blockquote, blockquote p { line-height: 1.6; color: rgba(0, 0, 0, 0.85); }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.2; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 1px #dedede; }
table thead, table tfoot { background: #f7f8f7; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: rgba(0, 0, 0, 0.8); text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: rgba(0, 0, 0, 0.8); }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f8f8f7; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.6; }

body { -moz-osx-font-smoothing: grayscale; -webkit-font-smoothing: antialiased; tab-size: 4; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.2; word-spacing: -0.05em; }
h1 strong, h2 strong, h3 strong, #toctitle strong, .sidebarblock > .content > .title strong, h4 strong, h5 strong, h6 strong { font-weight: 400; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: 0.9375em; font-style: normal !important; letter-spacing: 0; padding: 0.1em 0.5ex; word-spacing: -0.15em; background-color: #f7f7f8; -webkit-border-radius: 4px; border-radius: 4px; line-height: 1.45; text-rendering: optimizeSpeed; }

pre, pre > code { line-height: 1.45; color: rgba(0, 0, 0, 0.9); font-family: "Droid Sans Mono", "DejaVu Sans Mono", "Monospace", monospace; font-weight: normal; text-rendering: optimizeSpeed; }

em em { font-style: normal; }

strong strong { font-weight: normal; }

.keyseq { color: rgba(51, 51, 51, 0.8); }

kbd { font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace; display: inline-block; color: rgba(0, 0, 0, 0.8); font-size: 0.65em; line-height: 1.45; background-color: #f7f7f7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; margin: 0 0.15em; padding: 0.2em 0.5em; vertical-align: middle; position: relative; top: -0.1em; white-space: nowrap; }

.keyseq kbd:first-child { margin-left: 0; }

.keyseq kbd:last-child { margin-right: 0; }

.menuseq, .menu { color: rgba(0, 0, 0, 0.8); }

b.button:before, b.button:after { position: relative; top: -1px; font-weight: normal; }

b.button:before { content: "["; padding: 0 3px 0 2px; }

b.button:after { content: "]"; padding: 0 2px 0 3px; }

p a > code:hover { color: rgba(0, 0, 0, 0.9); }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#content { margin-top: 1.25em; }

#content:before { content: none; }

#header > h1:first-child { color: rgba(0, 0, 0, 0.85); margin-top: 2.25rem; margin-bottom: 0; }
#header > h1:first-child + #toc { margin-top: 8px; border-top: 1px solid #ddddd8; }
#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) { border-bottom: 1px solid #ddddd8; padding-bottom: 8px; }
#header .details { border-bottom: 1px solid #ddddd8; line-height: 1.45; padding-top: 0.25em; padding-bottom: 0.25em; padding-left: 0.25em; color: rgba(0, 0, 0, 0.6); display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; }
#header .details span:first-child { margin-left: -0.125em; }
#header .details span.email a { color: rgba(0, 0, 0, 0.85); }
#header .details br { display: none; }
#header .details br + span:before { content: "\00a0\2013\00a0"; }
#header .details br + span.author:before { content: "\00a0\22c5\00a0"; color: rgba(0, 0, 0, 0.85); }
#header .details br + span#revremark:before { content: "\00a0|\00a0"; }
#header #revnumber { text-transform: capitalize; }
#header #revnumber:after { content: "\00a0"; }

#content > h1:first-child:not([class]) { color: rgba(0, 0, 0, 0.85); border-bottom: 1px solid #ddddd8; padding-bottom: 8px; margin-top: 0; padding-top: 1rem; margin-bottom: 1.25rem; }

#toc { border-bottom: 1px solid #efefed; padding-bottom: 0.5em; }
#toc > ul { margin-left: 0.125em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin: 0.5em 0; }
#toc ul { font-family: "Open Sans", "DejaVu Sans", sans-serif; list-style-type: none; }
#toc li { line-height: 1.3334; margin-top: 0.3334em; }
#toc a { text-decoration: none; }
#toc a:active { text-decoration: underline; }

#toctitle { color: #7a2518; font-size: 1.2em; }

@media only screen and (min-width: 768px) { #toctitle { font-size: 1.375em; }
  body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { margin-top: 0 !important; background-color: #f8f8f7; position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #efefed; border-top-width: 0 !important; border-bottom-width: 0 !important; z-index: 1000; padding: 1.25em 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; margin-bottom: 0.8rem; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: 0.9em; margin-bottom: 0; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right-width: 0; border-left: 1px solid #efefed; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.25em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #e0e0dc; margin-bottom: 1.25em; padding: 1.25em; background: #f8f8f7; -webkit-border-radius: 4px; border-radius: 4px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }

#footer { max-width: 100%; background-color: rgba(0, 0, 0, 0.8); padding: 1.25em; }

#footer-text { color: rgba(255, 255, 255, 0.8); line-height: 1.44; }

.sect1 { padding-bottom: 0.625em; }

@media only screen and (min-width: 768px) { .sect1 { padding-bottom: 1.25em; } }
.sect1 + .sect1 { border-top: 1px solid #efefed; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; z-index: 1001; width: 1.5ex; margin-left: -1.5ex; display: block; text-decoration: none !important; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: "\00A7"; font-size: 0.85em; display: block; padding-top: 0.1em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #ba3925; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #a53221; }

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-rendering: optimizeLegibility; text-align: left; font-family: "Noto Serif", "DejaVu Serif", serif; font-size: 1rem; font-style: italic; }

table.tableblock > caption.title { white-space: nowrap; overflow: visible; max-width: 0; }

.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { color: rgba(0, 0, 0, 0.85); }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border-collapse: separate; border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; font-family: "Open Sans", "DejaVu Sans", sans-serif; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #ddddd8; color: rgba(0, 0, 0, 0.6); }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 4px; border-radius: 4px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #e0e0dc; margin-bottom: 1.25em; padding: 1.25em; background: #f8f8f7; -webkit-border-radius: 4px; border-radius: 4px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock > .content > .title { color: #7a2518; margin-top: 0; text-align: center; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock pre, .listingblock pre:not(.highlight), .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint { background: #f7f7f8; }
.sidebarblock .literalblock pre, .sidebarblock .listingblock pre:not(.highlight), .sidebarblock .listingblock pre[class="highlight"], .sidebarblock .listingblock pre[class^="highlight "], .sidebarblock .listingblock pre.CodeRay, .sidebarblock .listingblock pre.prettyprint { background: #f2f1f1; }

.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { -webkit-border-radius: 4px; border-radius: 4px; word-wrap: break-word; padding: 1em; font-size: 0.8125em; }
.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
@media only screen and (min-width: 768px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.90625em; } }
@media only screen and (min-width: 1280px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 1em; } }

.literalblock.output pre { color: #f7f7f8; background-color: rgba(0, 0, 0, 0.9); }

.listingblock pre.highlightjs { padding: 0; }
.listingblock pre.highlightjs > code { padding: 1em; -webkit-border-radius: 4px; border-radius: 4px; }

.listingblock pre.prettyprint { border-width: 0; }

.listingblock > .content { position: relative; }

.listingblock code[data-lang]:before { display: none; content: attr(data-lang); position: absolute; font-size: 0.75em; top: 0.425rem; right: 0.5rem; line-height: 1; text-transform: uppercase; color: #999; }

.listingblock:hover code[data-lang]:before { display: block; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: "$"; }

table.pyhltable { border-collapse: separate; border: 0; margin-bottom: 0; background: none; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; line-height: 1.45; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

pre.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #ddddd8; }

pre.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background: none !important; padding-right: 0 !important; }

.quoteblock { margin: 0 1em 1.25em 1.5em; display: table; }
.quoteblock > .title { margin-left: -1.5em; margin-bottom: 0.75em; }
.quoteblock blockquote, .quoteblock blockquote p { color: rgba(0, 0, 0, 0.85); font-size: 1.15rem; line-height: 1.75; word-spacing: 0.1em; letter-spacing: 0; font-style: italic; text-align: justify; }
.quoteblock blockquote { margin: 0; padding: 0; border: 0; }
.quoteblock blockquote:before { content: "\201c"; float: left; font-size: 2.75em; font-weight: bold; line-height: 0.6em; margin-left: -0.6em; color: #7a2518; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: 0.5em; margin-right: 0.5ex; text-align: right; }
.quoteblock .quoteblock { margin-left: 0; margin-right: 0; padding: 0.5em 0; border-left: 3px solid rgba(0, 0, 0, 0.6); }
.quoteblock .quoteblock blockquote { padding: 0 0 0 0.75em; }
.quoteblock .quoteblock blockquote:before { display: none; }

.verseblock { margin: 0 1em 1.25em 1em; }
.verseblock pre { font-family: "Open Sans", "DejaVu Sans", sans; font-size: 1.15rem; color: rgba(0, 0, 0, 0.85); font-weight: 300; text-rendering: optimizeLegibility; }
.verseblock pre strong { font-weight: 400; }
.verseblock .attribution { margin-top: 1.25rem; margin-left: 0.5ex; }

.quoteblock .attribution, .verseblock .attribution { font-size: 0.9375em; line-height: 1.45; font-style: italic; }
.quoteblock .attribution br, .verseblock .attribution br { display: none; }
.quoteblock .attribution cite, .verseblock .attribution cite { display: block; letter-spacing: -0.025em; color: rgba(0, 0, 0, 0.6); }

.quoteblock.abstract { margin: 0 0 1.25em 0; display: block; }
.quoteblock.abstract blockquote, .quoteblock.abstract blockquote p { text-align: left; word-spacing: 0; }
.quoteblock.abstract blockquote:before, .quoteblock.abstract blockquote p:first-of-type:before { display: none; }

table.tableblock { max-width: 100%; border-collapse: separate; }
table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child { margin-bottom: 0; }

table.tableblock, th.tableblock, td.tableblock { border: 0 solid #dedede; }

table.grid-all th.tableblock, table.grid-all td.tableblock { border-width: 0 1px 1px 0; }

table.grid-all tfoot > tr > th.tableblock, table.grid-all tfoot > tr > td.tableblock { border-width: 1px 1px 0 0; }

table.grid-cols th.tableblock, table.grid-cols td.tableblock { border-width: 0 1px 0 0; }

table.grid-all * > tr > .tableblock:last-child, table.grid-cols * > tr > .tableblock:last-child { border-right-width: 0; }

table.grid-rows th.tableblock, table.grid-rows td.tableblock { border-width: 0 0 1px 0; }

table.grid-all tbody > tr:last-child > th.tableblock, table.grid-all tbody > tr:last-child > td.tableblock, table.grid-all thead:last-child > tr > th.tableblock, table.grid-rows tbody > tr:last-child > th.tableblock, table.grid-rows tbody > tr:last-child > td.tableblock, table.grid-rows thead:last-child > tr > th.tableblock { border-bottom-width: 0; }

table.grid-rows tfoot > tr > th.tableblock, table.grid-rows tfoot > tr > td.tableblock { border-width: 1px 0 0 0; }

table.frame-all { border-width: 1px; }

table.frame-sides { border-width: 0 1px; }

table.frame-topbot { border-width: 1px 0; }

th.halign-left, td.halign-left { text-align: left; }

th.halign-right, td.halign-right { text-align: right; }

th.halign-center, td.halign-center { text-align: center; }

th.valign-top, td.valign-top { vertical-align: top; }

th.valign-bottom, td.valign-bottom { vertical-align: bottom; }

th.valign-middle, td.valign-middle { vertical-align: middle; }

table thead th, table tfoot th { font-weight: bold; }

tbody tr th { display: table-cell; line-height: 1.6; background: #f7f8f7; }

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: rgba(0, 0, 0, 0.8); font-weight: bold; }

p.tableblock > code:only-child { background: none; padding: 0; }

p.tableblock { font-size: 1em; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.75em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }

ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }

ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > .fa-square-o:first-child, ul.checklist li > p:first-child > .fa-check-square-o:first-child { width: 1em; font-size: 0.85em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { width: 1em; position: relative; top: 1px; }

ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1, td.hdlist2 { vertical-align: top; padding: 0 0.625em; }

td.hdlist1 { font-weight: bold; padding-bottom: 1.25em; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0.5em 0.75em; line-height: 1; vertical-align: top}
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; display: inline-block; }
a.image object { pointer-events: none; }

sup.footnote, sup.footnoteref { font-size: 0.875em; position: static; vertical-align: super; }
sup.footnote a, sup.footnoteref a { text-decoration: none; }
sup.footnote a:active, sup.footnoteref a:active { text-decoration: underline; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -0.25em 0 0.75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em 0 0.225em; line-height: 1.3334; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.05em; margin-bottom: 0.2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: 0; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > .fa { cursor: default; }

.admonitionblock td.icon [class^="fa icon-"] { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #19407c; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum[data-value] { display: inline-block; color: #fff !important; background-color: rgba(0, 0, 0, 0.8); -webkit-border-radius: 100px; border-radius: 100px; text-align: center; font-size: 0.75em; width: 1.67em; height: 1.67em; line-height: 1.67em; font-family: "Open Sans", "DejaVu Sans", sans-serif; font-style: normal; font-weight: bold; }
.conum[data-value] * { color: #fff !important; }
.conum[data-value] + b { display: none; }
.conum[data-value]:after { content: attr(data-value); }
pre .conum[data-value] { position: relative; top: -0.125em; }

b.conum * { color: inherit !important; }

.conum:not([data-value]):empty { display: none; }

dt, th.tableblock, td.content, div.footnote { text-rendering: optimizeLegibility; }

h1, h2, p, td.content, span.alt { letter-spacing: -0.01em; }

p strong, td.content strong, div.footnote strong { letter-spacing: -0.005em; }

p, blockquote, dt, td.content, span.alt { font-size: 1.0625rem; }

p { margin-bottom: 1.25rem; }

.sidebarblock p, .sidebarblock dt, .sidebarblock td.content, p.tableblock { font-size: 1em; }

.exampleblock > .content { background-color: #fffef7; border-color: #e0e0dc; -webkit-box-shadow: 0 1px 4px #e0e0dc; box-shadow: 0 1px 4px #e0e0dc; }

.print-only { display: none !important; }

@media print { @page { margin: 1.25cm 0.75cm; }
  * { -webkit-box-shadow: none !important; box-shadow: none !important; text-shadow: none !important; }
  a { color: inherit !important; text-decoration: underline !important; }
  a.bare, a[href^="#"], a[href^="mailto:"] { text-decoration: none !important; }
  a[href^="http:"]:not(.bare):after, a[href^="https:"]:not(.bare):after { content: "(" attr(href) ")"; display: inline-block; font-size: 0.875em; padding-left: 0.25em; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  pre, blockquote, tr, img, object, svg { page-break-inside: avoid; }
  thead { display: table-header-group; }
  svg { max-width: 100%; }
  p, blockquote, dt, td.content { font-size: 1em; orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  #toc, .sidebarblock, .exampleblock > .content { background: none !important; }
  #toc { border-bottom: 1px solid #ddddd8 !important; padding-bottom: 0 !important; }
  .sect1 { padding-bottom: 0 !important; }
  .sect1 + .sect1 { border: 0 !important; }
  #header > h1:first-child { margin-top: 1.25rem; }
  body.book #header { text-align: center; }
  body.book #header > h1:first-child { border: 0 !important; margin: 2.5em 0 1em 0; }
  body.book #header .details { border: 0 !important; display: block; padding: 0 !important; }
  body.book #header .details span:first-child { margin-left: 0 !important; }
  body.book #header .details br { display: block; }
  body.book #header .details br + span:before { content: none !important; }
  body.book #toc { border: 0 !important; text-align: left !important; padding: 0 !important; margin: 0 !important; }
  body.book #toc, body.book #preamble, body.book h1.sect0, body.book .sect1 > h2 { page-break-before: always; }
  .listingblock code[data-lang]:before { display: block; }
  #footer { background: none !important; padding: 0 0.9375em; }
  #footer-text { color: rgba(0, 0, 0, 0.6) !important; font-size: 0.9em; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
</style>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
<style>/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Performance Testing</h1>
<div class="toc2" id="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_methodology">Methodology</a></li>
<li><a href="#_framework">Framework</a>
<ul class="sectlevel2">
<li><a href="#_design">Design</a></li>
<li><a href="#_creating_a_new_test">Creating a New Test</a></li>
<li><a href="#_running_a_test_automatically">Running a Test Automatically</a></li>
<li><a href="#_running_a_test_manually">Running a Test Manually</a></li>
<li><a href="#_running_a_test_locally">Running a Test Locally</a></li>
</ul>
</li>
<li><a href="#_results">Results</a>
<ul class="sectlevel2">
<li><a href="#_grafana_dashboard">Grafana Dashboard</a></li>
<li><a href="#_html_report">HTML Report</a></li>
</ul>
</li>
<li><a href="#_debugging">Debugging</a>
<ul class="sectlevel2">
<li><a href="#_running_gatling_manually">Running Gatling Manually</a></li>
<li><a href="#_configuring_gatling_manually">Configuring Gatling Manually</a></li>
</ul>
</li>
<li><a href="#_additional_information">Additional Information</a>
<ul class="sectlevel2">
<li><a href="#_test_preparation">Test Preparation</a></li>
<li><a href="#_performance_test_library">Performance Test Library</a></li>
<li><a href="#_warmup_duration">Warmup Duration</a></li>
<li><a href="#_skipping_repose_or_origin_service_tests">Skipping Repose or Origin Service Tests</a></li>
<li><a href="#_cloud_server_flavor">Cloud Server Flavor</a></li>
<li><a href="#_increasing_timeout_for_repose_startup">Increasing Timeout for Repose Startup</a></li>
<li><a href="#_saxon">Saxon</a></li>
<li><a href="#_jvm_options_heap_size_garbage_collection_etc">JVM Options (Heap size, Garbage Collection, etc.)</a></li>
<li><a href="#_automatic_cloud_resource_cleanup">Automatic Cloud Resource Cleanup</a></li>
<li><a href="#_running_a_test_again">Running a Test Again</a></li>
<li><a href="#_gatling_output_directory_name">Gatling Output Directory Name</a></li>
<li><a href="#_running_parallel_tests">Running Parallel Tests</a></li>
<li><a href="#_scripting_filter_test">Scripting Filter Test</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Performance testing is a method of testing various aspects of <strong>Repose</strong> in order to collect performance data.
Performance data can be used to determine the overhead of the aspects in question, both at a system resource level as well as at a response time level.</p>
</div>
<div class="paragraph">
<p>To performance test <strong>Repose</strong>, and collect the resulting data for analysis, the <a href="#_framework">Framework</a> is used.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_methodology"><a class="anchor" href="#_methodology"></a>Methodology</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In an attempt to provide the most meaningful data possible, the following test cases will be covered by independent tests:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The simplest (i.e., passthrough) <strong>Repose</strong> deployment.</p>
</li>
<li>
<p>Every <strong>Repose</strong> filter.</p>
</li>
<li>
<p>A relatively complex <strong>Repose</strong> deployment.</p>
</li>
<li>
<p>Common <strong>Repose</strong> deployments (e.g., RBAC).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_framework"><a class="anchor" href="#_framework"></a>Framework</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_design"><a class="anchor" href="#_design"></a>Design</h3>
<div class="paragraph">
<p>The overall design of the automatic performance testing framework can be outlined succinctly by the following diagram:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="perf-test-design-diagram.png" alt="perf test design diagram" width="740" height="336">
</div>
</div>
<div class="paragraph">
<p>A code change in the <strong>Repose</strong> GitHub repository on the master branch will trigger a Jenkins job to run.
The Jenkins job will run the Ansible playbooks for all defined test cases.
The Ansible playbooks, in turn, will provision the necessary cloud resources and begin executing the Gatling simulations for each test case.
As Gatling runs, it will pipe the performance data it captures to InfluxDB.
Once Gatling execution completes, the cloud resources will be cleaned up, and the Ansible playbook will finish executing.
Grafana will query InfluxDB to retrieve the performance data which is available in the <a href="http://grafana.openrepose.org/dashboard/db/performance-tests?orgId=1">Performance Tests dashboard</a>.</p>
</div>
<div class="sect3">
<h4 id="_gatling"><a class="anchor" href="#_gatling"></a>Gatling</h4>
<div class="paragraph">
<p>Data will be transported from Gatling to InfluxDB using the Graphite line protocol.
The data being transferred will include numerous statistics calculated for a distinct time.
To get a better idea of the data in question, a sample has been provided which captures the number of request/response pairs sent at time <code>1492629621</code> as well as various statistics calculated from the amount of time taken to service those requests.
Note that the sample data only captures a single second of the Gatling simulation.
Much more data of the same form would be expected for every second that the Gatling simulation ran.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>gatling.computerworld.getComputers.ok.count 2 1492629621
gatling.computerworld.getComputers.ok.min 192 1492629621
gatling.computerworld.getComputers.ok.max 219 1492629621
gatling.computerworld.getComputers.ok.mean 205 1492629621
gatling.computerworld.getComputers.ok.stdDev 13 1492629621
gatling.computerworld.getComputers.ok.percentiles50 192 1492629621
gatling.computerworld.getComputers.ok.percentiles75 219 1492629621
gatling.computerworld.getComputers.ok.percentiles95 219 1492629621
gatling.computerworld.getComputers.ok.percentiles99 219 1492629621
gatling.computerworld.getComputers.ko.count 0 1492629621
gatling.computerworld.getComputers.all.count 2 1492629621
gatling.computerworld.getComputers.all.min 192 1492629621
gatling.computerworld.getComputers.all.max 219 1492629621
gatling.computerworld.getComputers.all.mean 205 1492629621
gatling.computerworld.getComputers.all.stdDev 13 1492629621
gatling.computerworld.getComputers.all.percentiles50 192 1492629621
gatling.computerworld.getComputers.all.percentiles75 219 1492629621
gatling.computerworld.getComputers.all.percentiles95 219 1492629621
gatling.computerworld.getComputers.all.percentiles99 219 1492629621</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_repose"><a class="anchor" href="#_repose"></a>Repose</h4>
<div class="paragraph">
<p>System data will be transported from <strong>Repose</strong> hosts to InfluxDB using <a href="https://docs.influxdata.com/telegraf/v1.3/">Telegraf</a>.
More specifically, Telegraf will collect system metrics like CPU usage, memory usage, and disk usage, and report those metrics to a UDP listener in InfluxDB.
These metrics will provide better insight into the system constraints of hosts running <strong>Repose</strong>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_influxdb"><a class="anchor" href="#_influxdb"></a>InfluxDB</h4>
<div class="paragraph">
<p>InfluxDB will process the data it receives through its Graphite listener port by applying configured templates.
These templates will translate the metric names from the Graphite line protocol into measurements, fields, tags, and values in the database.</p>
</div>
<div class="paragraph">
<p>For example, given the sample data provided in the <a href="#_gatling">Gatling section</a>, the following template could be applied:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>gatling.*.*.*.* measurement.simulation.request.status.field</pre>
</div>
</div>
<div class="paragraph">
<p>Resulting in a database full of entries like the following:</p>
</div>
<table class="tableblock frame-all grid-all">
<caption class="title">Table 1. Measurement Name: gatling</caption>
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field/Tag Key</th>
<th class="tableblock halign-left valign-top">Field/Tag Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1492629621000000000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">219</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">205</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">min</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">192</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">percentiles50</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">192</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">percentiles75</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">219</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">percentiles95</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">219</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">percentiles99</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">219</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">request</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">getComputers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">simulation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">computerworld</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">status</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">all</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">stdDev</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>To learn more about how InfluxDB handles Graphite input, see <a href="https://github.com/influxdata/influxdb/blob/master/services/graphite/README.md">Graphite Input</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_deployment"><a class="anchor" href="#_deployment"></a>Deployment</h4>
<div class="paragraph">
<p>The following diagram illustrates the interactions between each component referenced in the <a href="#_design">Design</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/performance-test-framework.png" alt="Performance Test Framework">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_new_test"><a class="anchor" href="#_creating_a_new_test"></a>Creating a New Test</h3>
<div class="paragraph">
<p>The directory structure of the performance tests is organized by <code>category</code> and <code>test</code>.
That is, each file is located in a directory named after the specific <code>test</code> which is itself located in a directory named after the <code>category</code> of test.
For example, the repose configuration files directory:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>repose-aggregator/tests/performance-tests/src/performanceTest/resources/roles/repose/files/config/</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>contains the <code>category</code> sub-directories <code>filters/</code>, <code>services/</code>, and <code>use-cases/</code>.</p>
</div>
<div class="paragraph">
<p>Armed with this information, these are the basic steps to create a new test:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a vars file for the new test.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>This needs to be located at:</p>
<div class="ulist">
<ul>
<li>
<p><code>repose-aggregator/tests/performance-tests/src/performanceTest/resources/test_vars/{category}/{test}.yaml</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>At a minimum, the vars file should contain:</p>
<div class="ulist">
<ul>
<li>
<p><code>dir_prefix</code></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>dir_prefix</code> is the <code>{category}/{test}</code> used to create the new vars file (e.g., <code>filters/saml</code>).</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>required filter chain</p>
</li>
<li>
<p>Gatling simulation class <code>package</code></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>package</code> is similarly created using <code>{category}.{test}</code> (e.g., <code>filters.saml</code>).</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Gatling simulation class <code>name</code></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>name</code> should follow the Camel Cased pattern of <code>{Test}{Category}Simulation</code> (e.g., <code>SamlFilterSimulation</code>, <code>ComplexUseCaseSimulation</code>).</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>If necessary, add <strong>Repose</strong> configuration files.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Template files should be placed in the directory:</p>
<div class="ulist">
<ul>
<li>
<p><code>repose-aggregator/tests/performance-tests/src/performanceTest/resources/roles/repose/templates/config/{dir_prefix}/</code></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The Framework uses Ansible and it supports Jinja2 templates.
These templates allow users to add dynamic content to files and Ansible variables.
Jinja2 templated files must have a <code>.j2</code> file extension appended to the file name and it will be removed as part of the templating process.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Configuration files should be placed in the directory:</p>
<div class="ulist">
<ul>
<li>
<p><code>repose-aggregator/tests/performance-tests/src/performanceTest/resources/roles/repose/files/config/{dir_prefix}/</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Create a <a href="http://gatling.io/docs/current/general/concepts/#simulation">Gatling simulation</a>.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>The Gatling simulation which will be responsible for generating test traffic and performance test data, should be created in the file:</p>
<div class="ulist">
<ul>
<li>
<p><code>repose-aggregator/tests/performance-tests/src/performanceTest/scala/{package}/{name}.scala</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>The Gatling simulation should, in most cases, extend the <code>AbstractReposeSimulation</code> class provided by the <strong>Repose</strong> <code>performance-test-library</code>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>If necessary, add mock services.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Create any necessary mocks in the directory:</p>
<div class="ulist">
<ul>
<li>
<p><code>repose-aggregator/tests/performance-tests/src/performanceTest/resources/roles/repose/files/mocks/{dir_prefix}/</code>.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_running_a_test_automatically"><a class="anchor" href="#_running_a_test_automatically"></a>Running a Test Automatically</h3>
<div class="paragraph">
<p>A Jenkins job is triggered any time that code on the master branch of the <a href="https://github.com/rackerlabs/repose">Repose Git Repository</a> changes.
The Jenkins job will run the performance tests and publish the results automatically.
<a href="#_design">Design</a> describes the full automated process in more detail.</p>
</div>
</div>
<div class="sect2">
<h3 id="_running_a_test_manually"><a class="anchor" href="#_running_a_test_manually"></a>Running a Test Manually</h3>
<div class="paragraph">
<p>If you have the appropriate permissions on the <strong>Repose Jenkins</strong> instance, you can run the <a href="https://jenkins.openrepose.org/job/performance-test/">performance-test</a> Jenkins job to manually start a single performance test.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the <a href="https://jenkins.openrepose.org/job/performance-test/">performance-test</a> Jenkins job click on the <a href="https://jenkins.openrepose.org/job/performance-test/build?delay=0sec">Build with Parameters</a> link.</p>
</li>
<li>
<p>Populate the build parameters for the test you want to run.</p>
</li>
<li>
<p>Click Build.</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all">
<caption class="title">Table 2. performance-test build parameters</caption>
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">perf_test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">name of the performance test you wish to perform</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uses-cases/simple</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">extra_options</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">extra options to pass to the ansible-playbook command</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-e '{gatling: {test: {params: {duration_in_min: 1}}}}'</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">branch</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the branch to build from (Default: <code>master</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REP-0000_NewPerfTest</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_running_a_test_locally"><a class="anchor" href="#_running_a_test_locally"></a>Running a Test Locally</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Set up your environment.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>We use Puppet to manage our performance test environment.
The details of our environment can be found in our <a href="https://github.com/rackerlabs/repose-infrastructure-ng/blob/master/myModules/repose_jenkins/manifests/performance_slave.pp">Puppet manifest</a>.
If you have <a href="https://puppet.com/">Puppet</a> installed, you can download our manifest and re-create our environment by running <code>puppet apply</code> directly on the downloaded file.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Clone the <a href="https://github.com/rackerlabs/repose">Repose GitHub repository</a> from Github.<br>
<code>git clone <a href="https://github.com/rackerlabs/repose.git" class="bare">https://github.com/rackerlabs/repose.git</a></code></p>
</li>
<li>
<p>Navigate to the performance test directory in the project.<br>
<code>cd repose/repose-aggregator/tests/performance-tests</code></p>
</li>
<li>
<p>If the test is not on the <code>master</code> branch, then you simply indicate the correct branch in the test&#8217;s <code>vars</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">{
  <span class="key">dir_prefix</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">filter/saml</span><span class="delimiter">&quot;</span></span><span class="string"><span class="content">,</span></span>
  <span class="key">repose</span>: <span class="string"><span class="content">{</span><span class="content">
    install: {
      git: {
        branch: &quot;REP-0000_NewPerfTest&quot; <i class="conum" data-value="1"></i><b>(1)</b>
      }
    },
    ...</span></span>
  },
  <span class="error">...</span>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This indicates the desired branch.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Run the <code>start_test.yml</code> Ansible playbook.<br>
This playbook will create the necessary Cloud resources, provision the servers, and execute the Gatling simulation.
When running the playbook, you may specify which test to run and what configuration to override for that test.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">ansible-playbook start_test.yml \ <i class="conum" data-value="1"></i><b>(1)</b>
  -e '{perf_test: filters/saml, <i class="conum" data-value="2"></i><b>(2)</b>
       gatling: {test: {params: {duration_in_min: 15, saml: {num_of_issuers: 2}}}}}' \ <i class="conum" data-value="3"></i><b>(3)</b>
  -vvvv <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Run the <code>start_test.yml</code> playbook.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Set the config value for <code>perf_test</code> to <code>filters/saml</code> to run the SAML test.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Override the values for the two config parameters using YAML syntax.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Provide very verbose output.</td>
</tr>
</table>
</div>
</li>
<li>
<p>View the <a href="#_results">Results</a>.</p>
</li>
<li>
<p>Clean up cloud resources.<br>
<code>ansible-playbook stop_test.yml -e '{perf_test: filters/saml}' -vvvv</code></p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_results"><a class="anchor" href="#_results"></a>Results</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_grafana_dashboard"><a class="anchor" href="#_grafana_dashboard"></a>Grafana Dashboard</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">TODO</div>
<div class="ulist">
<ul>
<li>
<p>Describe the dashboard.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Grafana serves as the user interface to performance test data which can be seen in the <a href="http://grafana.openrepose.org/dashboard/db/performance-tests?orgId=1">Performance Tests dashboard</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_html_report"><a class="anchor" href="#_html_report"></a>HTML Report</h3>
<div class="paragraph">
<p>After test execution has completed, Gatling will generate an HTML report.
The report can be found inside an archive residing in the home directory with a file name like <code>SamlFilterSimulationRepose-1496319945650.tar.gz</code>.
The exact file name will be included in the output of the <code>Fetch the Gatling results</code> task which will resemble the following snippet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>changed: [perf-filters-saml-testsuite01] =&gt; {
    "changed": true,
    "checksum": "9bf6327e21d9029870e81451287aef61428329bf",
    "dest": "/home/perftester/SamlFilterSimulationRepose-1496319945650.tar.gz", <i class="conum" data-value="1"></i><b>(1)</b>
    "md5sum": "aeace1aecfb4949b0e6bbd104e87b7a0",
    "remote_checksum": "9bf6327e21d9029870e81451287aef61428329bf",
    "remote_md5sum": null
}</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This is the file name.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>After the report archive is located, the contents must be extracted before the report can be viewed.
That can be done with a command like the following:<br>
<code>tar xvf /home/perftester/SamlFilterSimulationRepose-1496319945650.tar.gz</code></p>
</div>
<div class="paragraph">
<p>Once the report has been extracted, it can be viewed by opening the <code>index.html</code> file with a web browser.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_debugging"><a class="anchor" href="#_debugging"></a>Debugging</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_running_gatling_manually"><a class="anchor" href="#_running_gatling_manually"></a>Running Gatling Manually</h3>
<div class="paragraph">
<p>If you need to manually run Gatling, you can do so from the Gatling host.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">export JAVA_OPTS=&quot;-Dtest.base_url=162.200.100.100:7070&quot; <i class="conum" data-value="1"></i><b>(1)</b>
export GATLING_HOME=&quot;/root/gatling/current&quot; <i class="conum" data-value="2"></i><b>(2)</b>
cd $GATLING_HOME

gatling -s filters.saml.SamlFilterSimulation <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The target host and port need to be specified for all of the simulations.
These JAVA_OPTS are only for Gatling and do not apply to <strong>Repose</strong>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>GATLING_HOME</code> needs to be set for Gatling to run.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>filters.saml.SamlFilterSimulation</code> is the package-qualified class name of the simulation to run.
It should be replaced with the FQCN of the simulation that should be run.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_gatling_manually"><a class="anchor" href="#_configuring_gatling_manually"></a>Configuring Gatling Manually</h3>
<div class="paragraph">
<p>Files and directories of interest:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>conf/logback.xml</code> - Lets you turn on debug logging; useful to see the request and response data.</p>
</li>
<li>
<p><code>conf/application.conf</code> - The configuration file read by the simulations.</p>
</li>
<li>
<p><code>results/</code> - Contains all of the results.</p>
</li>
<li>
<p><code>user-files/simulations/</code> - Contains the test simulations written in Scala and organized by package.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_additional_information"><a class="anchor" href="#_additional_information"></a>Additional Information</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_test_preparation"><a class="anchor" href="#_test_preparation"></a>Test Preparation</h3>
<div class="paragraph">
<p>The Ansible directory is prepared by running the Gradle task <code>buildAnsibleDirectory</code>.
The base ansible files are processed using an ant based templating, this allows any build time values to be templated in (such as the gatling version to use).
The simulations are copied in from the source directory.
Any dependencies of the simulations will be copied into place for placement in the Gatling <code>lib</code> directory.</p>
</div>
</div>
<div class="sect2">
<h3 id="_performance_test_library"><a class="anchor" href="#_performance_test_library"></a>Performance Test Library</h3>
<div class="paragraph">
<p>To reduce redundancy, the <strong>Repose</strong> team created the <code>performance-test-framework</code> for Gatling.
This library includes the <code>AbstractReposeSimulation</code>, which is meant to serve as the basis for most, if not all, simulations.</p>
</div>
<div class="paragraph">
<p>To utilize the <code>performance-test-framework</code>, its JAR file must be placed in the Gatling <code>lib</code> directory.
This is handled along with any other dependencies by the Gradle task <code>buildAnsibleDirectory</code>.
The <code>lib</code> directory is a sub-directory of the Gatling home directory.</p>
</div>
<div class="paragraph">
<p>In the context of the <a href="#_framework">Framework</a>, Jenkins will build the <code>performance-test-framework</code> and copy the resulting JAR into the Ansible directory structure where it will then be copied to the hosts running Gatling.</p>
</div>
</div>
<div class="sect2">
<h3 id="_warmup_duration"><a class="anchor" href="#_warmup_duration"></a>Warmup Duration</h3>
<div class="paragraph">
<p>Run the simple use-case test for 15 minutes with a 5 minute warmup (20 minutes total):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">ansible-playbook start_test.yml \
  -e '{perf_test: use-cases/simple,
       gatling: {test: {params: {duration_in_min: 15, warmup_duration_in_min: 5}}}}' \
  -vvvv</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_skipping_repose_or_origin_service_tests"><a class="anchor" href="#_skipping_repose_or_origin_service_tests"></a>Skipping Repose or Origin Service Tests</h3>
<div class="paragraph">
<p>By default, both the <strong>Repose</strong> test and the origin service test (i.e., <strong>Repose</strong> is bypassed) are run.
You can use Ansible tags to specify that only one of those tests should be run.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">ansible-playbook start_test.yml \
  -e '{perf_test: filters/saml}' \
  --tags &quot;repose&quot; \
  -vvvv</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">ansible-playbook start_test.yml \
  -e '{perf_test: filters/saml}' \
  --tags &quot;origin&quot; \
  -vvvv</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cloud_server_flavor"><a class="anchor" href="#_cloud_server_flavor"></a>Cloud Server Flavor</h3>
<div class="paragraph">
<p>You can specify which cloud server flavor to use in the configuration overrides.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">ansible-playbook start_test.yml \
  -e '{perf_test: filters/saml,
       cloud: {server: {repose: {flavor: performance1-4}}}}' \
  -vvvv</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_increasing_timeout_for_repose_startup"><a class="anchor" href="#_increasing_timeout_for_repose_startup"></a>Increasing Timeout for Repose Startup</h3>
<div class="paragraph">
<p>By default, the <strong>Repose</strong> start task will wait 5 minutes for <strong>Repose</strong> to start up.
If you expect <strong>Repose</strong> to take longer to start (e.g., due to a large WADL), you can increase this timeout using a command like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">ansible-playbook start_test.yml \
  -e '{perf_test: filters/saml,
       repose: {service: {start_timeout_in_sec: 900}}}' \
  -vvvv</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_saxon"><a class="anchor" href="#_saxon"></a>Saxon</h3>
<div class="paragraph">
<p>To get <strong>Repose</strong> to use Saxon, add a <code>saxon-license.lic</code> file to the <code>repose-aggregator/tests/performance-tests/roles/repose/files/</code> directory and pass in the following configuration override:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">ansible-playbook start_test.yml \
  -e '{perf_test: filters/saml,
       repose: {systemd_opts: {use_saxon: true}}}' \
  -vvvv</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jvm_options_heap_size_garbage_collection_etc"><a class="anchor" href="#_jvm_options_heap_size_garbage_collection_etc"></a>JVM Options (Heap size, Garbage Collection, etc.)</h3>
<div class="paragraph">
<p>You can set the JVM Options (<code>JAVA_OPTS</code>) used by <strong>Repose</strong> by setting the following configuration override:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">ansible-playbook start_test.yml \
  -e '{perf_test: filters/saml,
       repose: {
         systemd_opts: {
           java_opts: [&quot;-Xmx2g&quot;, &quot;-Xms2g&quot;, &quot;-XX:+UseG1GC&quot;, &quot;-XX:+UseStringDeduplication&quot;]}}}' \
  -vvvv</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_automatic_cloud_resource_cleanup"><a class="anchor" href="#_automatic_cloud_resource_cleanup"></a>Automatic Cloud Resource Cleanup</h3>
<div class="paragraph">
<p>Use the master playbook to run a performance test and immediately clean up afterwards without having to running the individual playbooks.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">ansible-playbook site.yml \
  -e '{perf_test: filters/saml}' \
  -vvvv</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_running_a_test_again"><a class="anchor" href="#_running_a_test_again"></a>Running a Test Again</h3>
<div class="paragraph">
<p>You can re-run a test using the same cloud resources by simply running the <code>start_test.yml</code> playbook again.
You can even specify different configuration overrides in subsequent runs, although there are some limitations.
For example, you can enable Saxon for a subsequent run, but you can&#8217;t disable it afterwards.
Also, if you don&#8217;t want the <strong>Repose</strong> JVM already warmed up from the previous run, you should have Ansible restart the <strong>Repose</strong> service.
This feature is considered experimental.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">ansible-playbook start_test.yml \
  -e '{perf_test: filters/saml,
       repose: {service: {state: restarted}, systemd_opts: {use_saxon: true}}}' \
  -vvvv</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gatling_output_directory_name"><a class="anchor" href="#_gatling_output_directory_name"></a>Gatling Output Directory Name</h3>
<div class="paragraph">
<p>You can specify the base name of the directory containing the Gatling results in the configuration overrides.
For example, if you wanted the base name <code>custom-base-name</code> (resulting in a directory name resembling <code>custom-base-name-repose-1487812914968</code>), you would run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">ansible-playbook start_test.yml \
  -e '{perf_test: filters/saml,
       gatling: {results: {output_dir: custom-base-name}}}' \
  -vvvv</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_running_parallel_tests"><a class="anchor" href="#_running_parallel_tests"></a>Running Parallel Tests</h3>
<div class="paragraph">
<p>Running a performance test with a unique naming prefix enables you to run a particular test multiple times simultaneously (each run requires a unique prefix):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">ansible-playbook start_test.yml \
  -e '{perf_test: filters/saml,
       cloud: {naming_prefix: perf-saml-many-issuers},
       gatling: {test: {params: {saml: {num_of_issuers: 100}}}}}' \
  -vvvv</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you&#8217;re using the <code>stop_test.yml</code> playbook to clean up your cloud resources, you&#8217;ll need to include the unique prefix to ensure the correct resources are deleted.
If the prefix is not specified, the wrong cloud resources or no cloud resources could end up being deleted, and in both cases, no error will be returned (due to idempotency).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">ansible-playbook stop_test.yml \
  -e '{perf_test: filters/saml,
       cloud: {naming_prefix: perf-saml-many-issuers}}' \
  -vvvv</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scripting_filter_test"><a class="anchor" href="#_scripting_filter_test"></a>Scripting Filter Test</h3>
<div class="paragraph">
<p>When running a Scripting filter test, the <code>perf_test</code> variable will look slightly different than it does for other tests.
The reason is that the scripting language to be used in the test is nested one level down in the <code>perf_test</code> variable value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">ansible-playbook start_test.yml \
  -e '{perf_test: filters/scripting/python}' \
  -vvvv</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 8.10.0.0<br>
Last updated 2018-08-27 20:43:51 UTC
</div>
</div>
</body>
</html>