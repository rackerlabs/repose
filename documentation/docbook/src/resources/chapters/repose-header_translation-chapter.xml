<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE book [
<!-- product name is likely to change; parameterize full name, abbreviated name, expanded name -->
<!ENTITY PRODNAME "Repose">
<!ENTITY PRODABBREV "Repose">
<!ENTITY PRODEXPAND "REstful PrOxy Service Engine">
    <!-- Some useful entities borrowed from HTML -->
    <!ENTITY ndash  "&#x2013;">
    <!ENTITY mdash  "&#x2014;">
    <!ENTITY hellip "&#x2026;">
    
    <!-- Useful for describing APIs -->
    <!ENTITY GET    '<command xmlns="http://docbook.org/ns/docbook">GET</command>'>
    <!ENTITY PUT    '<command xmlns="http://docbook.org/ns/docbook">PUT</command>'>
    <!ENTITY POST   '<command xmlns="http://docbook.org/ns/docbook">POST</command>'>
    <!ENTITY DELETE '<command xmlns="http://docbook.org/ns/docbook">DELETE</command>'>
    
    <!ENTITY CHECK  '<inlinemediaobject xmlns="http://docbook.org/ns/docbook">
        <imageobject>
        <imagedata fileref="img/Check_mark_23x20_02.svg"
        format="SVG" scale="60"/>
        </imageobject>
        </inlinemediaobject>'>
        
    <!ENTITY ARROW  '<inlinemediaobject xmlns="http://docbook.org/ns/docbook">
        <imageobject>
        <imagedata fileref="img/Arrow_east.svg"
        format="SVG" scale="60"/>
        </imageobject>
        </inlinemediaobject>'>
]>

<chapter version="5.0" xmlns="http://docbook.org/ns/docbook"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xmlns:svg="http://www.w3.org/2000/svg"
    xmlns:m="http://www.w3.org/1998/Math/MathML"
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns:db="http://docbook.org/ns/docbook"
    xml:id="Repose-Header-Translation-Chapter">
    <title>Header Translation Filter</title>
    <section xml:id="What-Is-Header-Translation">
        <title>What Is Header Translation?</title>
        <para> Header translation is the process of converting the
            name of one header name into a new header name or into
            multiple new header names without changing the
            functionality of the request. </para>
    </section>
    <section xml:id="What-Header-Translation-Does">
        <title> What Can the Header Translation Filter Do?</title>
        <para> The Header Translation filter allows you to translate
            one header name into a new header name or one header name
            to multiple new header names. </para>
    </section>
    <section xml:id="Request-Prereqs">
        <title> What Are the Request Prerequisites?</title>
        <para> The Header Translation filter has no request
            prerequisites. </para>
    </section>
    <section xml:id="Header-Translation-Configuration">
        <title>How Is the Header Translation Filter
            Configured?</title>
        <para>The Header Translation filter can be configured by
            editing the <code>header-translation.cfg.xml</code>file.
            To change your header translation configuration, edit
            header-translation.cfg.xml at any time. Within
                <code>header-translation.cfg.xml</code>, you can
            specify the following element:</para>
        <para><code>&lt;header
                original-name=""new-name=""remove-original=""/&gt;</code></para>
        <para>The elements and attributes used in the Header
            Translation filter are described below:</para>
        <variablelist>
            <varlistentry xml:id="original-name">
                <term>&lt;original-name&gt;</term>
                <listitem>
                    <para> This attribute contains the name of an
                        already present header that you would like to
                        translate. The header is evaluated in a
                        case-sensitive manner. </para>
                    <para>
                        <note>
                            <para>You may not have duplicate
                                   <code>&lt;original-names></code>
                                between different
                                   <code>&lt;header></code>
                                names.</para>
                        </note>
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry xml:id="new-name">
                <term>&lt;original-name&gt;</term>
                <listitem>
                    <para>This attribute is a space-delimited list of
                        names that you would like the
                            <code>&lt;original-name></code> translated
                        into. </para>
                </listitem>
            </varlistentry>
            <varlistentry xml:id="remove-original">
                <term>&lt;remove-original&gt; (optional)</term>
                <listitem>
                    <para>This attribute removes the original headers.
                        The default value is set to <emphasis
                            role="italic">false</emphasis>.</para>
                </listitem>
            </varlistentry>
        </variablelist>
    </section>
    <section xml:id="How-Header-Translation-Works">
        <title>How Does the Header Translation Filter Work?</title>
        <para>When a request hits the Header Translation filter, it
            will look for any existing header names that match
                the <code>&lt;original-name></code> attribute of
                the <code>&lt;header></code> element. The value of
                that <code>&lt;original-name></code> will be added to
            new headers using the list of <code>&lt;new-name></code>
            for the new header names. In addition, if
                the <code>&lt;remove-original></code> attribute is set
            to <emphasis role="italic">true</emphasis>, the header
            matching the <code>&lt;original-name></code> will be
            removed.</para>
        <para>A typical Header Translation filter decision flow is summarized in the drawing below:</para>
        <figure
            xml:id="Header-Translation-Diagram">
            <title>Request/Response Lifecycle for
                the Header Translation Filter</title>
            <mediaobject>
                <imageobject>
                    <imagedata
                        fileref="../figures/repose-header-translation-diagram.png"
                        format="PNG" align="center"/>
                </imageobject>
            </mediaobject>
        </figure>
    </section>
    <section xml:id="Header-Translation-Tests">
        <title>What Are Some Header Translation Filter Tests</title>
        <para>
            Some tests go here.
        </para>
    </section>
        
   
</chapter>
