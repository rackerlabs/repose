import org.apache.tools.ant.filters.ReplaceTokens

dependencies {
    compile project(":repose-aggregator:commons:commons-utilities")
    compile "com.yammer.metrics:metrics-core"
    compile "org.scala-lang:scala-library"
    compile "com.typesafe.scala-logging:scala-logging-slf4j_$scalaMajDotMin"

    provided "org.glassfish:javax.servlet"

    testCompile project(":repose-aggregator:commons:commons-test")
    testCompile "junit:junit"
    testCompile "org.scalatest:scalatest_$scalaMajDotMin"
    testCompile "org.hamcrest:hamcrest-all"
    testCompile "org.mockito:mockito-all"
    testCompile "org.springframework:spring-test"
}

license {
    excludes(["**/httpx-headers.xsd", "**/httpx-common.xsd", "**/httpx.xsd", "**/request.xml", "**/response.xml"])
}

processResources {
    //INFO: We'd like to use the more standard gradle 'expand( docsHome: docsHome)',
    // however it chokes pretty hard on the regexs we sprinkle into our xml specifically the `\`.
    // We can update our config file examples to not have that in the regex,
    // however some of the schemas we've imported also have them, and we shouldn't mess with those.
    // Instead I've elected to use ant based filtering.
    filter(ReplaceTokens, tokens: [docsHome: docsHome])
}
