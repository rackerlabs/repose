<?xml version="1.0" encoding="UTF-8"?>
<rate-limiting xmlns="http://docs.openrepose.org/repose/rate-limiting/v1.0"
               use-capture-groups="true">

    <request-endpoint uri-regex="/service/limits" include-absolute-limits="false"/>

    <limit-group id="domain-queries" groups="dbaas" default="false">
        <limit id="test" uri="/domain?queries=*" uri-regex="/domain(.*)" http-methods="ALL" unit="MINUTE" value="3">
            <query-param>
                <key-regex>name</key-regex>
                <value-regex>.*</value-regex>
            </query-param>
        </limit>
    </limit-group>

    <limit-group id="domain-queries2" groups="dbaas2" default="false">
        <limit id="test" uri="/domain?queries=*" uri-regex="/domain(.*)" http-methods="ALL" unit="MINUTE" value="3">
            <query-param>
                <key-regex>search</key-regex>
                <value-regex>.*</value-regex>
            </query-param>
        </limit>
    </limit-group>

    <limit-group id="domain-queries3" groups="dbaas3" default="false">
        <limit id="test" uri="/info?queries=*" uri-regex="/info(.*)" http-methods="ALL" unit="MINUTE" value="3">
            <query-param>
                <key-regex>name</key-regex>
                <value-regex>.*</value-regex>
            </query-param>

            <query-param>
                <key-regex>age</key-regex>
                <value-regex>.*</value-regex>
            </query-param>

            <query-param>
                <key-regex>query</key-regex>
                <value-regex>.*</value-regex>
            </query-param>
        </limit>
    </limit-group>

    <limit-group id="domain-queries4" groups="dbaas4" default="false">
        <limit id="test" uri="/info?queries=*" uri-regex="/info(.*)" http-methods="ALL" unit="MINUTE" value="2">
            <query-param>
                <key-regex>time search</key-regex>
                <value-regex>.*</value-regex>
            </query-param>

            <query-param>
                <key-regex>other</key-regex>
                <value-regex>.*</value-regex>
            </query-param>
        </limit>
    </limit-group>

    <limit-group id="domain-queries5" groups="dbaas5" default="false">
        <limit id="test" uri="/domain?n*=B*" uri-regex="/domain" http-methods="ALL" unit="MINUTE" value="1">
            <query-param>
                <key-regex>n.*</key-regex>
                <value-regex>B(.*)</value-regex>
            </query-param>
        </limit>
    </limit-group>
</rate-limiting>
